@{
    ViewBag.Title = "ChangePassword";
    Layout = "~/Views/Shared/_LayoutMain.cshtml";
}
@model Student.Models.ProfileModels
<script>
    $(".profile-menu").addClass('toggled'); //overflow: hidden; display: block;
    $(".main-menu").css("display", "block");
    function ChnagePassword(input) {

        if ($("#OldPassword").val() == '')
        {
            alert('Please enter the Current Password.');
            $("#OldPassword").focus();
            return false;
        }
        if ($("#NewPassword").val() == '')
        {
            alert('Please enter the New Password.');
            $("#NewPassword").focus();
            return false;
        }
        if ($("#ConfirmPassword").val()=='')
        {
            alert('Please enter the Confirm New Password.');
            $("#ConfirmPassword").focus();
            return false;
        }
        if ($("#NewPassword").val() != $("#ConfirmPassword").val())
        {
            alert('New password and Confirm Password must be same.');
            $("#ConfirmPassword").focus();
            return false;
        }

        var fileData = new FormData();
        fileData.append('ID', $("#UserID").val());
        fileData.append('OldPass', $("#OldPassword").val());
        fileData.append('NewPass', $("#NewPassword").val());
        fileData.append('CnfPass', $("#ConfirmPassword").val());

            $.ajax({
                //url: '/Home/UploadFiles',
                url: '@Url.Action("ChangeStudentPassword")',
                type: "POST",
                contentType: false, // Not to set any content header
                processData: false, // Not to process data
                data: fileData,
                success: function (result) {
                    alert(result);
                    location.reload();
                },
                error: function (err) {
                    alert(err.statusText);
                }
            });
    }
</script>
@Html.HiddenFor(m => m.UserID)
<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Change Password</h1>
    </div>
</div>
<div style="padding-left: 10px;">
    <div>
        <div class="form-group">
        </div>
        <div class="form-group">
            <div class="input-group field">
                <span class="input-group-addon">
                    <i class="fa fa-wrench"></i>
                </span>
                <input class="form-control" data-val="true" data-val-length="The field Password must be a string with a maximum length of 50." data-val-length-max="50" data-val-required=" " id="OldPassword" name="OldPassword" placeholder="Current Password*" type="password">
                <span class="field-validation-valid" data-valmsg-for="OldPassword" data-valmsg-replace="true"></span>
            </div>
        </div>
        <div class="form-group">
            <div class="input-group field">
                <span class="input-group-addon">
                    <i class="fa fa-key"></i>
                </span>
                <input class="form-control" data-val="true" data-val-length="The field Password must be a string with a maximum length of 50." data-val-length-max="50" data-val-required=" " id="NewPassword" name="NewPassword" placeholder="New Password*" type="password">
                <span class="field-validation-valid" data-valmsg-for="NewPassword" data-valmsg-replace="true"></span>
            </div>
        </div>
        <div class="form-group">
            <div class="input-group field">
                <span class="input-group-addon">
                    <i class="fa fa-key"></i>
                </span>
                <input class="form-control" data-val="true" data-val-equalto="Confirm Password does not matched" data-val-equalto-other="*.NewPassword" data-val-length="The field Password must be a string with a maximum length of 50." data-val-length-max="50" data-val-required=" " id="ConfirmPassword" name="ConfirmPassword" placeholder="Confirm New Password*" type="password">
                <span class="field-validation-valid" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true" style="color: red"></span>
            </div>
        </div>
    </div>
    <div class="form-group clear">
        &nbsp;&nbsp;&nbsp;&nbsp;
        <button type="button" value="Update" class="btn btn-success waves-effect" onclick="ChnagePassword(this)">Update</button>&nbsp;&nbsp;
        <a href="/Member/Dashboard" class="btn btn-warning waves-effect">Cancel</a>
    </div>
</div>
<script>
    $(document).ready(function () {
       

       

    });
    function kk() {

        swal({
            title: "",
            text: "Has Agregado un Usuario Nuevo!sdfsf sf sfs fs f s f s fs f s f s f sdf sdf s f sfd s fs f s fdsdf s df s f sdf s dfs df sdf s d",
            closeOnConfirm: false
        },
                    function () {
                        swal.close();
                        $("#OldPassword").focus();

                    });
    }
</script>
